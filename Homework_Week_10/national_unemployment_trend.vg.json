{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 700,
  "height": 400,
  
  "data": {
    "url": "https://raw.githubusercontent.com/peishuen/3179/main/Homework_Week_10/national_unemployment_year.csv"
  },

  "title": {
    "text": "National Unemployment Trend in Malaysia (2017-2024)",
    "fontSize": 16,
    "fontWeight": "bold",
    "anchor": "middle",
    "offset": 15
  },
  
  "params": [
    {
      "name": "startYear", 
      "value": 2017,
      "bind": {
        "input": "range",
        "min": 2017,
        "max": 2024,
        "step": 1,
        "name": "Start Year: "
      }
    },
    {
      "name": "endYear", 
      "value": 2024,
      "bind": {
        "input": "range",
        "min": 2017,
        "max": 2024,
        "step": 1,
        "name": "End Year: "
      }
    }
  ],

  "transform": [
    {"filter": "datum.year >= startYear && datum.year <= endYear"}
  ],

  "layer": [
    {
      "mark": {
      "type": "line",
      "color": "#3a925f",
      "strokeWidth": 3,
      "point": {"size": 35, "color": "#3a925f"}
      },

      "encoding": {
          "x": {
            "field": "year",
            "type": "quantitative",
            "title": "Year",
            "axis": {"labelAngle": 0, "grid": false, "tickMinStep": 1, "format": "d"}
          },

          "y": {
            "field": "unemployment_rate",
            "type": "quantitative",
            "title": "Unemployment Rate  (%)"
          },

          "tooltip": [
            {"field": "year", "type": "ordinal", "title": "Year"},
            {"field": "unemployment_rate", "type": "quantitative", "title": "Unemployment Rate (%)"}
          ]
      }
    },
    {
      "mark": {
          "type": "rule",
          "color": "gray",
          "strokeDash": [4, 4],
          "strokeWidth": 2
      },
      
      "encoding": {
        "x": {"datum": 2020}
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "dx": 0,
        "dy": -130,
        "fontSize": 12,
        "color": "gray"
      },

      "encoding": {
        "x": {"datum": 2020},
        "y": {"datum": 3.5},
        "text": {"value": "COVID-19 Pandemic"}
      }
    }
  ]
}